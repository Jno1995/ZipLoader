!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.ZipLoader=t()}(this,function(){"use strict";function e(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function t(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=I,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new u.Buf32(be),t.distcode=t.distdyn=new u.Buf32(we),t.sane=1,t.back=-1,Z):O}function i(e){var i;return e&&e.state?(i=e.state,i.wsize=0,i.whave=0,i.wnext=0,t(e)):O}function n(e,t){var n,a;return e&&e.state?(a=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?O:(null!==a.window&&a.wbits!==t&&(a.window=null),a.wrap=n,a.wbits=t,i(e))):O}function a(e,t){var i,a;return e?(a=new function(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new u.Buf16(320),this.work=new u.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0},e.state=a,a.window=null,(i=n(e,t))!==Z&&(e.state=null),i):O}function r(e){if(me){var t;for(d=new u.Buf32(512),h=new u.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(v(x,e.lens,0,288,d,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;v(B,e.lens,0,32,h,0,e.work,{bits:5}),me=!1}e.lencode=d,e.lenbits=9,e.distcode=h,e.distbits=5}function s(e,t,i,n){var a,r=e.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new u.Buf8(r.wsize)),n>=r.wsize?(u.arraySet(r.window,t,i-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):((a=r.wsize-r.wnext)>n&&(a=n),u.arraySet(r.window,t,i-n,a,r.wnext),(n-=a)?(u.arraySet(r.window,t,i-n,n,0),r.wnext=n,r.whave=r.wsize):(r.wnext+=a,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=a))),0}function o(e,t){if(t<65537&&(e.subarray&&ge||!e.subarray&&_e))return String.fromCharCode.apply(null,u.shrinkBuf(e,t));for(var i="",n=0;n<t;n++)i+=String.fromCharCode(e[n]);return i}function f(e){if(!(this instanceof f))return new f(e);this.options=u.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ee,this.strm.avail_out=0;var i=ke.inflateInit2(this.strm,t.windowBits);if(i!==Be.Z_OK)throw new Error(Se[i]);this.header=new Re,ke.inflateGetHeader(this.strm,this.header)}function l(e,t){var i=new f(t);if(i.push(e,!0),i.err)throw i.msg||Se[i.err];return i.result}var d,h,u=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e,t){function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var a in n)i(n,a)&&(e[a]=n[a])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,i,n,a){if(t.subarray&&e.subarray)e.set(t.subarray(i,i+n),a);else for(var r=0;r<n;r++)e[a+r]=t[i+r]},flattenChunks:function(e){var t,i,n,a,r,s;for(n=0,t=0,i=e.length;t<i;t++)n+=e[t].length;for(s=new Uint8Array(n),a=0,t=0,i=e.length;t<i;t++)r=e[t],s.set(r,a),a+=r.length;return s}},r={arraySet:function(e,t,i,n,a){for(var r=0;r<n;r++)e[a+r]=t[i+r]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,a)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,r))},t.setTyped(n)}),c=(u.assign,u.shrinkBuf,u.setTyped,u.Buf8,u.Buf16,u.Buf32,function(e,t,i,n){for(var a=65535&e|0,r=e>>>16&65535|0,s=0;0!==i;){i-=s=i>2e3?2e3:i;do{r=r+(a=a+t[n++]|0)|0}while(--s);a%=65521,r%=65521}return a|r<<16|0}),b=function(){for(var e,t=[],i=0;i<256;i++){e=i;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t}(),w=function(e,t,i,n){var a=b,r=n+i;e^=-1;for(var s=n;s<r;s++)e=e>>>8^a[255&(e^t[s])];return-1^e},p=function(e,t){var i,n,a,r,s,o,f,l,d,h,u,c,b,w,p,m,k,_,g,v,y,x,B,S,E;i=e.state,n=e.next_in,S=e.input,a=n+(e.avail_in-5),r=e.next_out,E=e.output,s=r-(t-e.avail_out),o=r+(e.avail_out-257),f=i.dmax,l=i.wsize,d=i.whave,h=i.wnext,u=i.window,c=i.hold,b=i.bits,w=i.lencode,p=i.distcode,m=(1<<i.lenbits)-1,k=(1<<i.distbits)-1;e:do{b<15&&(c+=S[n++]<<b,b+=8,c+=S[n++]<<b,b+=8),_=w[c&m];t:for(;;){if(g=_>>>24,c>>>=g,b-=g,0===(g=_>>>16&255))E[r++]=65535&_;else{if(!(16&g)){if(0==(64&g)){_=w[(65535&_)+(c&(1<<g)-1)];continue t}if(32&g){i.mode=12;break e}e.msg="invalid literal/length code",i.mode=30;break e}v=65535&_,(g&=15)&&(b<g&&(c+=S[n++]<<b,b+=8),v+=c&(1<<g)-1,c>>>=g,b-=g),b<15&&(c+=S[n++]<<b,b+=8,c+=S[n++]<<b,b+=8),_=p[c&k];i:for(;;){if(g=_>>>24,c>>>=g,b-=g,!(16&(g=_>>>16&255))){if(0==(64&g)){_=p[(65535&_)+(c&(1<<g)-1)];continue i}e.msg="invalid distance code",i.mode=30;break e}if(y=65535&_,g&=15,b<g&&(c+=S[n++]<<b,(b+=8)<g&&(c+=S[n++]<<b,b+=8)),(y+=c&(1<<g)-1)>f){e.msg="invalid distance too far back",i.mode=30;break e}if(c>>>=g,b-=g,g=r-s,y>g){if((g=y-g)>d&&i.sane){e.msg="invalid distance too far back",i.mode=30;break e}if(x=0,B=u,0===h){if(x+=l-g,g<v){v-=g;do{E[r++]=u[x++]}while(--g);x=r-y,B=E}}else if(h<g){if(x+=l+h-g,(g-=h)<v){v-=g;do{E[r++]=u[x++]}while(--g);if(x=0,h<v){v-=g=h;do{E[r++]=u[x++]}while(--g);x=r-y,B=E}}}else if(x+=h-g,g<v){v-=g;do{E[r++]=u[x++]}while(--g);x=r-y,B=E}for(;v>2;)E[r++]=B[x++],E[r++]=B[x++],E[r++]=B[x++],v-=3;v&&(E[r++]=B[x++],v>1&&(E[r++]=B[x++]))}else{x=r-y;do{E[r++]=E[x++],E[r++]=E[x++],E[r++]=E[x++],v-=3}while(v>2);v&&(E[r++]=E[x++],v>1&&(E[r++]=E[x++]))}break}}break}}while(n<a&&r<o);n-=v=b>>3,c&=(1<<(b-=v<<3))-1,e.next_in=n,e.next_out=r,e.avail_in=n<a?a-n+5:5-(n-a),e.avail_out=r<o?o-r+257:257-(r-o),i.hold=c,i.bits=b},m=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],k=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],_=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],g=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],v=function(e,t,i,n,a,r,s,o){var f,l,d,h,c,b,w,p,v,y=o.bits,x=0,B=0,S=0,E=0,R=0,Z=0,A=0,T=0,O=0,U=0,L=null,N=0,C=new u.Buf16(16),I=new u.Buf16(16),D=null,F=0;for(x=0;x<=15;x++)C[x]=0;for(B=0;B<n;B++)C[t[i+B]]++;for(R=y,E=15;E>=1&&0===C[E];E--);if(R>E&&(R=E),0===E)return a[r++]=20971520,a[r++]=20971520,o.bits=1,0;for(S=1;S<E&&0===C[S];S++);for(R<S&&(R=S),T=1,x=1;x<=15;x++)if(T<<=1,(T-=C[x])<0)return-1;if(T>0&&(0===e||1!==E))return-1;for(I[1]=0,x=1;x<15;x++)I[x+1]=I[x]+C[x];for(B=0;B<n;B++)0!==t[i+B]&&(s[I[t[i+B]]++]=B);if(0===e?(L=D=s,b=19):1===e?(L=m,N-=257,D=k,F-=257,b=256):(L=_,D=g,b=-1),U=0,B=0,x=S,c=r,Z=R,A=0,d=-1,O=1<<R,h=O-1,1===e&&O>852||2===e&&O>592)return 1;for(;;){w=x-A,s[B]<b?(p=0,v=s[B]):s[B]>b?(p=D[F+s[B]],v=L[N+s[B]]):(p=96,v=0),f=1<<x-A,S=l=1<<Z;do{a[c+(U>>A)+(l-=f)]=w<<24|p<<16|v|0}while(0!==l);for(f=1<<x-1;U&f;)f>>=1;if(0!==f?(U&=f-1,U+=f):U=0,B++,0==--C[x]){if(x===E)break;x=t[i+s[B]]}if(x>R&&(U&h)!==d){for(0===A&&(A=R),c+=S,T=1<<(Z=x-A);Z+A<E&&!((T-=C[Z+A])<=0);)Z++,T<<=1;if(O+=1<<Z,1===e&&O>852||2===e&&O>592)return 1;a[d=U&h]=R<<24|Z<<16|c-r|0}}return 0!==U&&(a[c+U]=x-A<<24|64<<16|0),o.bits=R,0},y=0,x=1,B=2,S=4,E=5,R=6,Z=0,A=1,T=2,O=-2,U=-3,L=-4,N=-5,C=8,I=1,D=2,F=3,H=4,z=5,j=6,M=7,K=8,J=9,P=10,Y=11,G=12,$=13,V=14,X=15,q=16,W=17,Q=18,ee=19,te=20,ie=21,ne=22,ae=23,re=24,se=25,oe=26,fe=27,le=28,de=29,he=30,ue=31,ce=32,be=852,we=592,pe=15,me=!0,ke={inflateReset:i,inflateReset2:n,inflateResetKeep:t,inflateInit:function(e){return a(e,pe)},inflateInit2:a,inflate:function(t,i){var n,a,o,f,l,d,h,b,m,k,_,g,be,we,pe,me,ke,_e,ge,ve,ye,xe,Be,Se,Ee=0,Re=new u.Buf8(4),Ze=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return O;(n=t.state).mode===G&&(n.mode=$),l=t.next_out,o=t.output,h=t.avail_out,f=t.next_in,a=t.input,d=t.avail_in,b=n.hold,m=n.bits,k=d,_=h,xe=Z;e:for(;;)switch(n.mode){case I:if(0===n.wrap){n.mode=$;break}for(;m<16;){if(0===d)break e;d--,b+=a[f++]<<m,m+=8}if(2&n.wrap&&35615===b){n.check=0,Re[0]=255&b,Re[1]=b>>>8&255,n.check=w(n.check,Re,2,0),b=0,m=0,n.mode=D;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&b)<<8)+(b>>8))%31){t.msg="incorrect header check",n.mode=he;break}if((15&b)!==C){t.msg="unknown compression method",n.mode=he;break}if(b>>>=4,m-=4,ye=8+(15&b),0===n.wbits)n.wbits=ye;else if(ye>n.wbits){t.msg="invalid window size",n.mode=he;break}n.dmax=1<<ye,t.adler=n.check=1,n.mode=512&b?P:G,b=0,m=0;break;case D:for(;m<16;){if(0===d)break e;d--,b+=a[f++]<<m,m+=8}if(n.flags=b,(255&n.flags)!==C){t.msg="unknown compression method",n.mode=he;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=he;break}n.head&&(n.head.text=b>>8&1),512&n.flags&&(Re[0]=255&b,Re[1]=b>>>8&255,n.check=w(n.check,Re,2,0)),b=0,m=0,n.mode=F;case F:for(;m<32;){if(0===d)break e;d--,b+=a[f++]<<m,m+=8}n.head&&(n.head.time=b),512&n.flags&&(Re[0]=255&b,Re[1]=b>>>8&255,Re[2]=b>>>16&255,Re[3]=b>>>24&255,n.check=w(n.check,Re,4,0)),b=0,m=0,n.mode=H;case H:for(;m<16;){if(0===d)break e;d--,b+=a[f++]<<m,m+=8}n.head&&(n.head.xflags=255&b,n.head.os=b>>8),512&n.flags&&(Re[0]=255&b,Re[1]=b>>>8&255,n.check=w(n.check,Re,2,0)),b=0,m=0,n.mode=z;case z:if(1024&n.flags){for(;m<16;){if(0===d)break e;d--,b+=a[f++]<<m,m+=8}n.length=b,n.head&&(n.head.extra_len=b),512&n.flags&&(Re[0]=255&b,Re[1]=b>>>8&255,n.check=w(n.check,Re,2,0)),b=0,m=0}else n.head&&(n.head.extra=null);n.mode=j;case j:if(1024&n.flags&&((g=n.length)>d&&(g=d),g&&(n.head&&(ye=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),u.arraySet(n.head.extra,a,f,g,ye)),512&n.flags&&(n.check=w(n.check,a,g,f)),d-=g,f+=g,n.length-=g),n.length))break e;n.length=0,n.mode=M;case M:if(2048&n.flags){if(0===d)break e;g=0;do{ye=a[f+g++],n.head&&ye&&n.length<65536&&(n.head.name+=String.fromCharCode(ye))}while(ye&&g<d);if(512&n.flags&&(n.check=w(n.check,a,g,f)),d-=g,f+=g,ye)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=K;case K:if(4096&n.flags){if(0===d)break e;g=0;do{ye=a[f+g++],n.head&&ye&&n.length<65536&&(n.head.comment+=String.fromCharCode(ye))}while(ye&&g<d);if(512&n.flags&&(n.check=w(n.check,a,g,f)),d-=g,f+=g,ye)break e}else n.head&&(n.head.comment=null);n.mode=J;case J:if(512&n.flags){for(;m<16;){if(0===d)break e;d--,b+=a[f++]<<m,m+=8}if(b!==(65535&n.check)){t.msg="header crc mismatch",n.mode=he;break}b=0,m=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=G;break;case P:for(;m<32;){if(0===d)break e;d--,b+=a[f++]<<m,m+=8}t.adler=n.check=e(b),b=0,m=0,n.mode=Y;case Y:if(0===n.havedict)return t.next_out=l,t.avail_out=h,t.next_in=f,t.avail_in=d,n.hold=b,n.bits=m,T;t.adler=n.check=1,n.mode=G;case G:if(i===E||i===R)break e;case $:if(n.last){b>>>=7&m,m-=7&m,n.mode=fe;break}for(;m<3;){if(0===d)break e;d--,b+=a[f++]<<m,m+=8}switch(n.last=1&b,b>>>=1,m-=1,3&b){case 0:n.mode=V;break;case 1:if(r(n),n.mode=te,i===R){b>>>=2,m-=2;break e}break;case 2:n.mode=W;break;case 3:t.msg="invalid block type",n.mode=he}b>>>=2,m-=2;break;case V:for(b>>>=7&m,m-=7&m;m<32;){if(0===d)break e;d--,b+=a[f++]<<m,m+=8}if((65535&b)!=(b>>>16^65535)){t.msg="invalid stored block lengths",n.mode=he;break}if(n.length=65535&b,b=0,m=0,n.mode=X,i===R)break e;case X:n.mode=q;case q:if(g=n.length){if(g>d&&(g=d),g>h&&(g=h),0===g)break e;u.arraySet(o,a,f,g,l),d-=g,f+=g,h-=g,l+=g,n.length-=g;break}n.mode=G;break;case W:for(;m<14;){if(0===d)break e;d--,b+=a[f++]<<m,m+=8}if(n.nlen=257+(31&b),b>>>=5,m-=5,n.ndist=1+(31&b),b>>>=5,m-=5,n.ncode=4+(15&b),b>>>=4,m-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=he;break}n.have=0,n.mode=Q;case Q:for(;n.have<n.ncode;){for(;m<3;){if(0===d)break e;d--,b+=a[f++]<<m,m+=8}n.lens[Ze[n.have++]]=7&b,b>>>=3,m-=3}for(;n.have<19;)n.lens[Ze[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Be={bits:n.lenbits},xe=v(y,n.lens,0,19,n.lencode,0,n.work,Be),n.lenbits=Be.bits,xe){t.msg="invalid code lengths set",n.mode=he;break}n.have=0,n.mode=ee;case ee:for(;n.have<n.nlen+n.ndist;){for(;Ee=n.lencode[b&(1<<n.lenbits)-1],pe=Ee>>>24,me=Ee>>>16&255,ke=65535&Ee,!(pe<=m);){if(0===d)break e;d--,b+=a[f++]<<m,m+=8}if(ke<16)b>>>=pe,m-=pe,n.lens[n.have++]=ke;else{if(16===ke){for(Se=pe+2;m<Se;){if(0===d)break e;d--,b+=a[f++]<<m,m+=8}if(b>>>=pe,m-=pe,0===n.have){t.msg="invalid bit length repeat",n.mode=he;break}ye=n.lens[n.have-1],g=3+(3&b),b>>>=2,m-=2}else if(17===ke){for(Se=pe+3;m<Se;){if(0===d)break e;d--,b+=a[f++]<<m,m+=8}m-=pe,ye=0,g=3+(7&(b>>>=pe)),b>>>=3,m-=3}else{for(Se=pe+7;m<Se;){if(0===d)break e;d--,b+=a[f++]<<m,m+=8}m-=pe,ye=0,g=11+(127&(b>>>=pe)),b>>>=7,m-=7}if(n.have+g>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=he;break}for(;g--;)n.lens[n.have++]=ye}}if(n.mode===he)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=he;break}if(n.lenbits=9,Be={bits:n.lenbits},xe=v(x,n.lens,0,n.nlen,n.lencode,0,n.work,Be),n.lenbits=Be.bits,xe){t.msg="invalid literal/lengths set",n.mode=he;break}if(n.distbits=6,n.distcode=n.distdyn,Be={bits:n.distbits},xe=v(B,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Be),n.distbits=Be.bits,xe){t.msg="invalid distances set",n.mode=he;break}if(n.mode=te,i===R)break e;case te:n.mode=ie;case ie:if(d>=6&&h>=258){t.next_out=l,t.avail_out=h,t.next_in=f,t.avail_in=d,n.hold=b,n.bits=m,p(t,_),l=t.next_out,o=t.output,h=t.avail_out,f=t.next_in,a=t.input,d=t.avail_in,b=n.hold,m=n.bits,n.mode===G&&(n.back=-1);break}for(n.back=0;Ee=n.lencode[b&(1<<n.lenbits)-1],pe=Ee>>>24,me=Ee>>>16&255,ke=65535&Ee,!(pe<=m);){if(0===d)break e;d--,b+=a[f++]<<m,m+=8}if(me&&0==(240&me)){for(_e=pe,ge=me,ve=ke;Ee=n.lencode[ve+((b&(1<<_e+ge)-1)>>_e)],pe=Ee>>>24,me=Ee>>>16&255,ke=65535&Ee,!(_e+pe<=m);){if(0===d)break e;d--,b+=a[f++]<<m,m+=8}b>>>=_e,m-=_e,n.back+=_e}if(b>>>=pe,m-=pe,n.back+=pe,n.length=ke,0===me){n.mode=oe;break}if(32&me){n.back=-1,n.mode=G;break}if(64&me){t.msg="invalid literal/length code",n.mode=he;break}n.extra=15&me,n.mode=ne;case ne:if(n.extra){for(Se=n.extra;m<Se;){if(0===d)break e;d--,b+=a[f++]<<m,m+=8}n.length+=b&(1<<n.extra)-1,b>>>=n.extra,m-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=ae;case ae:for(;Ee=n.distcode[b&(1<<n.distbits)-1],pe=Ee>>>24,me=Ee>>>16&255,ke=65535&Ee,!(pe<=m);){if(0===d)break e;d--,b+=a[f++]<<m,m+=8}if(0==(240&me)){for(_e=pe,ge=me,ve=ke;Ee=n.distcode[ve+((b&(1<<_e+ge)-1)>>_e)],pe=Ee>>>24,me=Ee>>>16&255,ke=65535&Ee,!(_e+pe<=m);){if(0===d)break e;d--,b+=a[f++]<<m,m+=8}b>>>=_e,m-=_e,n.back+=_e}if(b>>>=pe,m-=pe,n.back+=pe,64&me){t.msg="invalid distance code",n.mode=he;break}n.offset=ke,n.extra=15&me,n.mode=re;case re:if(n.extra){for(Se=n.extra;m<Se;){if(0===d)break e;d--,b+=a[f++]<<m,m+=8}n.offset+=b&(1<<n.extra)-1,b>>>=n.extra,m-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=he;break}n.mode=se;case se:if(0===h)break e;if(g=_-h,n.offset>g){if((g=n.offset-g)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=he;break}g>n.wnext?(g-=n.wnext,be=n.wsize-g):be=n.wnext-g,g>n.length&&(g=n.length),we=n.window}else we=o,be=l-n.offset,g=n.length;g>h&&(g=h),h-=g,n.length-=g;do{o[l++]=we[be++]}while(--g);0===n.length&&(n.mode=ie);break;case oe:if(0===h)break e;o[l++]=n.length,h--,n.mode=ie;break;case fe:if(n.wrap){for(;m<32;){if(0===d)break e;d--,b|=a[f++]<<m,m+=8}if(_-=h,t.total_out+=_,n.total+=_,_&&(t.adler=n.check=n.flags?w(n.check,o,_,l-_):c(n.check,o,_,l-_)),_=h,(n.flags?b:e(b))!==n.check){t.msg="incorrect data check",n.mode=he;break}b=0,m=0}n.mode=le;case le:if(n.wrap&&n.flags){for(;m<32;){if(0===d)break e;d--,b+=a[f++]<<m,m+=8}if(b!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=he;break}b=0,m=0}n.mode=de;case de:xe=A;break e;case he:xe=U;break e;case ue:return L;case ce:default:return O}return t.next_out=l,t.avail_out=h,t.next_in=f,t.avail_in=d,n.hold=b,n.bits=m,(n.wsize||_!==t.avail_out&&n.mode<he&&(n.mode<fe||i!==S))&&s(t,t.output,t.next_out,_-t.avail_out)?(n.mode=ue,L):(k-=t.avail_in,_-=t.avail_out,t.total_in+=k,t.total_out+=_,n.total+=_,n.wrap&&_&&(t.adler=n.check=n.flags?w(n.check,o,_,t.next_out-_):c(n.check,o,_,t.next_out-_)),t.data_type=n.bits+(n.last?64:0)+(n.mode===G?128:0)+(n.mode===te||n.mode===X?256:0),(0===k&&0===_||i===S)&&xe===Z&&(xe=N),xe)},inflateEnd:function(e){if(!e||!e.state)return O;var t=e.state;return t.window&&(t.window=null),e.state=null,Z},inflateGetHeader:function(e,t){var i;return e&&e.state?0==(2&(i=e.state).wrap)?O:(i.head=t,t.done=!1,Z):O},inflateSetDictionary:function(e,t){var i,n,a=t.length;return e&&e.state?0!==(i=e.state).wrap&&i.mode!==Y?O:i.mode===Y&&(n=1,(n=c(n,t,a,0))!==i.check)?U:s(e,t,a,a)?(i.mode=ue,L):(i.havedict=1,Z):O},inflateInfo:"pako inflate (from Nodeca project)"},_e=!0,ge=!0;try{String.fromCharCode.apply(null,[0])}catch(e){_e=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){ge=!1}for(var ve=new u.Buf8(256),ye=0;ye<256;ye++)ve[ye]=ye>=252?6:ye>=248?5:ye>=240?4:ye>=224?3:ye>=192?2:1;ve[254]=ve[254]=1;var xe={string2buf:function(e){var t,i,n,a,r,s=e.length,o=0;for(a=0;a<s;a++)55296==(64512&(i=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(n=e.charCodeAt(a+1)))&&(i=65536+(i-55296<<10)+(n-56320),a++),o+=i<128?1:i<2048?2:i<65536?3:4;for(t=new u.Buf8(o),r=0,a=0;r<o;a++)55296==(64512&(i=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(n=e.charCodeAt(a+1)))&&(i=65536+(i-55296<<10)+(n-56320),a++),i<128?t[r++]=i:i<2048?(t[r++]=192|i>>>6,t[r++]=128|63&i):i<65536?(t[r++]=224|i>>>12,t[r++]=128|i>>>6&63,t[r++]=128|63&i):(t[r++]=240|i>>>18,t[r++]=128|i>>>12&63,t[r++]=128|i>>>6&63,t[r++]=128|63&i);return t},buf2binstring:function(e){return o(e,e.length)},binstring2buf:function(e){for(var t=new u.Buf8(e.length),i=0,n=t.length;i<n;i++)t[i]=e.charCodeAt(i);return t},buf2string:function(e,t){var i,n,a,r,s=t||e.length,f=new Array(2*s);for(n=0,i=0;i<s;)if((a=e[i++])<128)f[n++]=a;else if((r=ve[a])>4)f[n++]=65533,i+=r-1;else{for(a&=2===r?31:3===r?15:7;r>1&&i<s;)a=a<<6|63&e[i++],r--;r>1?f[n++]=65533:a<65536?f[n++]=a:(a-=65536,f[n++]=55296|a>>10&1023,f[n++]=56320|1023&a)}return o(f,n)},utf8border:function(e,t){var i;for((t=t||e.length)>e.length&&(t=e.length),i=t-1;i>=0&&128==(192&e[i]);)i--;return i<0?t:0===i?t:i+ve[e[i]]>t?i:t}},Be={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},Se={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ee=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Re=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},Ze=Object.prototype.toString;f.prototype.push=function(e,t){var i,n,a,r,s,o,f=this.strm,l=this.options.chunkSize,d=this.options.dictionary,h=!1;if(this.ended)return!1;n=t===~~t?t:!0===t?Be.Z_FINISH:Be.Z_NO_FLUSH,"string"==typeof e?f.input=xe.binstring2buf(e):"[object ArrayBuffer]"===Ze.call(e)?f.input=new Uint8Array(e):f.input=e,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new u.Buf8(l),f.next_out=0,f.avail_out=l),(i=ke.inflate(f,Be.Z_NO_FLUSH))===Be.Z_NEED_DICT&&d&&(o="string"==typeof d?xe.string2buf(d):"[object ArrayBuffer]"===Ze.call(d)?new Uint8Array(d):d,i=ke.inflateSetDictionary(this.strm,o)),i===Be.Z_BUF_ERROR&&!0===h&&(i=Be.Z_OK,h=!1),i!==Be.Z_STREAM_END&&i!==Be.Z_OK)return this.onEnd(i),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&i!==Be.Z_STREAM_END&&(0!==f.avail_in||n!==Be.Z_FINISH&&n!==Be.Z_SYNC_FLUSH)||("string"===this.options.to?(a=xe.utf8border(f.output,f.next_out),r=f.next_out-a,s=xe.buf2string(f.output,a),f.next_out=r,f.avail_out=l-r,r&&u.arraySet(f.output,f.output,a,r,0),this.onData(s)):this.onData(u.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(h=!0)}while((f.avail_in>0||0===f.avail_out)&&i!==Be.Z_STREAM_END);return i===Be.Z_STREAM_END&&(n=Be.Z_FINISH),n===Be.Z_FINISH?(i=ke.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Be.Z_OK):n!==Be.Z_SYNC_FLUSH||(this.onEnd(Be.Z_OK),f.avail_out=0,!0)},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===Be.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Ae={Inflate:f,inflate:l,inflateRaw:function(e,t){return t=t||{},t.raw=!0,l(e,t)},ungzip:l},Te=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataView=new DataView(t),this.position=0}return e.prototype.skip=function(e){this.position+=e},e.prototype.readBytes=function(e){var t=4===e?"getUint32":2===e?"getUint16":"getUint8",i=this.position;return this.position+=e,this.dataView[t](i,!0)},e}(),Oe=function(e){var t=0,i=void 0;e.skip(4);var n=e.readBytes(2);e.skip(8);var a=e.readBytes(4);e.skip(4);var r=e.readBytes(2),s=e.readBytes(2),o=[],f=new Uint8Array(a);for(t=0;t<r;t++)o.push(String.fromCharCode(e.readBytes(1)));for(e.skip(s),t=0;t<a;t++)f[t]=e.readBytes(1);switch(n){case 0:i=f;break;case 8:i=new Uint8Array(Ae.inflate(f,{raw:!0}));break;default:console.log(o.join("")+": unsupported compression type"),i=f}return{name:o.join(""),buffer:i}},Ue=function(e){e.skip(24);var t=e.readBytes(2),i=e.readBytes(2),n=e.readBytes(2);e.skip(12),e.skip(t),e.skip(i),e.skip(n)},Le=0,Ne=void 0,Ce=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._id=Le,this._listeners={},this.url=t,this.files=null,Le++}return e.prototype.load=function(){var e=this,t=Date.now(),i=new XMLHttpRequest;i.open("GET",this.url,!0),i.responseType="arraybuffer",i.onprogress=function(i){e.dispatch({type:"progress",loaded:i.loaded,total:i.total,elapsedTime:Date.now()-t})},i.onload=function(n){e.files=function(e){for(var t=new Te(e),i={};;){var n=t.readBytes(4);if(67324752!==n){if(33639248!==n)break;Ue(t)}else{var a=Oe(t);i[a.name]={buffer:a.buffer}}}return i}(i.response),e.dispatch({type:"load",elapsedTime:Date.now()-t})},i.send()},e.prototype.extractAsBlobUrl=function(e,t){if(this.files[e].url)return this.files[e].url;var i=new Blob([this.files[e].buffer],{type:t});return this.files[e].url=URL.createObjectURL(i),this.files[e].url},e.prototype.extractAsText=function(e){for(var t="",i=0,n=this.files[e].buffer.length;i<n;i++)t+=String.fromCharCode(this.files[e].buffer[i]);return decodeURIComponent(escape(t))},e.prototype.extractAsJSON=function(e){return JSON.parse(this.extractAsText(e))},e.prototype.loadThreeJson=function(e){console.log("loadThreeJson() has been changed. use loadThreeJSON()"),this.loadThreeJSON(e)},e.prototype.loadThreeJSON=function(e){var t=this,i=this.extractAsJSON(e),n=e.replace(/\/.+\.json$/,"/"),a="__ziploader_"+this._id+"__",r=new RegExp(a);return-1!==!Ne.Loader.Handlers.handlers.indexOf(r)&&Ne.Loader.Handlers.add(r,{load:function(e){return t.loadThreeTexture(e.replace(r,""))}}),Ne.JSONLoader.prototype.parse(i,a+n)},e.prototype.loadThreeTexture=function(e){var t=new Ne.Texture,i=/\.jpg$/.test(e)?"image/jpeg":/\.png$/.test(e)?"image/png":/\.gif$/.test(e)?"image/gif":void 0,n=new Blob([this.files[e].buffer],{type:i});return t.image=new Image,t.image.addEventListener("load",function e(){t.needsUpdate=!0,t.image.removeEventListener("load",e),URL.revokeObjectURL(t.image.src)}),t.image.src=URL.createObjectURL(n),t},e.prototype.on=function(e,t){this._listeners[e]||(this._listeners[e]=[]),-1===this._listeners[e].indexOf(t)&&this._listeners[e].push(t)},e.prototype.off=function(e,t){var i=this._listeners[e];if(i){var n=i.indexOf(t);-1!==n&&i.splice(n,1)}},e.prototype.dispatch=function(e){var t=this._listeners[e.type];if(t){e.target=this;for(var i=t.length,n=0;n<i;n++)t[n].call(this,e)}},e.prototype.clear=function(e){if(e)return URL.revokeObjectURL(this.files[e].url),void delete this.files[e];for(var t in this.files)URL.revokeObjectURL(this.files[t].url);if(delete this.files,Ne){var i="__ziploader_"+this._id+"__";Ne.Loader.Handlers.handlers.some(function(e,t){if(e instanceof RegExp&&e.source===i)return Ne.Loader.Handlers.handlers.splice(t,2),!0})}},e}();return Ce.use=function(e){e.THREE&&(Ne=e.THREE)},Ce});
